import{a as C}from"../../../_chunks/chunk-T77H62QX.js";import{a as w}from"../../../_chunks/chunk-33CQORJC.js";import{e as v,f as x,g as R,h as r,i as u}from"../../../_chunks/chunk-XIQQ2G2N.js";import{c as e,f as l,g as a,h as c,i as d,j as p}from"../../../_chunks/chunk-7V7WNOD5.js";var B=l(p(),1);var S=l(p(),1),t=l(p(),1);var h=class h extends S.TemplatedDialog{constructor(o){super(o),this.permissions=new C({element:this.byId("Permissions"),showRevoke:!1}),R.List({RoleID:this.options.roleID},n=>{this.permissions.value=n.Entities.map(m=>({PermissionKey:m}))}),this.permissions.implicitPermissions=(0,t.getRemoteData)("Administration.ImplicitPermissions")}getDialogOptions(){let o=super.getDialogOptions();return o.buttons=[{text:(0,t.localText)("Dialogs.OkButton"),click:e(n=>{R.Update({RoleID:this.options.roleID,Permissions:this.permissions.value.map(m=>m.PermissionKey)},m=>{this.dialogClose(),window.setTimeout(()=>(0,t.notifySuccess)((0,t.localText)("Site.RolePermissionDialog.SaveSuccess")),0)})},"click")},{text:(0,t.localText)("Dialogs.CancelButton"),click:e(()=>this.dialogClose(),"click")}],o.title=(0,t.format)((0,t.localText)("Site.RolePermissionDialog.DialogTitle"),this.options.title),o}getTemplate(){return'<div id="~_Permissions"></div>'}};e(h,"RolePermissionDialog");var g=h;var P=l(p(),1);var b="edit-permissions",k,T,E;k=[P.Decorators.registerClass("ToDoApp.Administration.RoleDialog")];var i=class i extends(E=P.EntityDialog){constructor(){super(...arguments);this.form=new x(this.idPrefix)}getFormKey(){return x.formKey}getIdProperty(){return r.idProperty}getLocalTextPrefix(){return r.localTextPrefix}getNameProperty(){return r.nameProperty}getService(){return u.baseUrl}getToolbarButtons(){let n=super.getToolbarButtons();return n.push({title:w.Site.RolePermissionDialog.EditButton,cssClass:b,icon:"fa-lock text-green",onClick:e(()=>{new g({roleID:this.entity.RoleId,title:this.entity.RoleName}).dialogOpen()},"onClick")}),n}updateInterface(){super.updateInterface(),this.toolbar.findButton(b).toggleClass("disabled",this.isNewOrDeleted())}};T=a(E),i=d(T,0,"RoleDialog",k,i),e(i,"RoleDialog"),c(T,1,i);var f=i;var y=l(p(),1);var O,I,K;O=[y.Decorators.registerClass("ToDoApp.Administration.RoleGrid")];var s=class s extends(K=y.EntityGrid){getColumnsKey(){return v.columnsKey}getDialogType(){return f}getIdProperty(){return r.idProperty}getLocalTextPrefix(){return r.localTextPrefix}getService(){return u.baseUrl}constructor(o){super(o)}getDefaultSortBy(){return[r.Fields.RoleName]}};I=a(K),s=d(I,0,"RoleGrid",O,s),e(s,"RoleGrid"),c(I,1,s);var D=s;var Z=e(()=>(0,B.gridPageInit)(D),"default");export{Z as default};
//# sourceMappingURL=RolePage.js.map
